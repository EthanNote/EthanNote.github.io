# 理解 CSI

### 飞刀的使用姿势
无名大侠，苦心钻研，习得绝技。

侠有一徒，授以飞刀，二人皆信手拈来，百步穿杨，易如反掌。师徒尝相互空手接飞刀，滋养灵犀。

某日，师曰：“尔与我以飞刀为暗号，相互通信，岂不妙哉。”

徒曰：“何以也？”

“飞行时旋转的速度，与飞刀出手时刀尖的朝向，这两个参数足以构造暗号。”

徒秒懂，曰：“此乃旋转频率与初始相位也，不足为奇。”

“徒儿聪慧。事先约定频率若干，以某频率及某初始相位投掷飞刀，即可发送暗语。”

“然则接收者何以得知发送者初始相位，两者相去甚远，不可目视也。”

“此易耳，发送信息之前，先以事先约定好的一个初始相位投掷飞刀，接收者观察接收到飞刀时刀尖的朝向，计算两相位之相位差。
通信时，接收者将手中飞刀相位减去相位差，遂得初始相位。”

徒大悟，“此技甚妙。若约定好发送时的投掷高度，接受者根据接收时的高度计算飞行落差，通信时即可反推发送者投掷高度。”

“然也。”师徒二人遂苦练绝技，技成，出书，将测量所得的高度差和相位差名以信道状态信息。

### 信道估计
WiFi 使用逆傅里叶变换对一串要被发送的数字数据进行调制，逆傅里叶变换能够生成由不同频率信号复合成的信号，各个子频率可以独立构成载波信号，由此构成了OFDM中的子载波。

单一子载波的发送数据可用一个向量来表示，向量的幅度表示信号强度，向量的相位表示信号在相位调制时的相位大小。信号传播过程中幅度会不断衰减，而相位会随时间周期性地变化。与信号对应的向量就像飞刀一样，一边向前飞行，一边旋转。

接收器为了知道发射器发送了怎样的信号，需要估计出相位偏移和幅度衰减。假设发送器和接收器约定好了一个已知信号X，发送器发射X，接收器接收到了信号Y，Y与X的幅度和相位都存在差异。

用符号 H 表示 X 经由传播过程变为Y的变换关系，则可以写作

        Y = HX

如果用二维向量表示，H是一个旋转+缩放的矩阵，而如果用复数指数表示，X、Y、H 都可以写成 a*exp(j*b)的形式。

我们把 H 称为信道估计，也叫信道频域响应，还叫信道状态信息（Channel State Information）
